<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/moment-range/3.1.1/moment-range.js"
    ></script>
    <link rel="stylesheet" href="./assets/css/styles.css" />
    <link rel="stylesheet" href="./assets/css/gallery.css" />
    <title>Jonny gallery ideas</title>
  </head>
  <body>
    <!-- NAVBAR -->
    <header class="header">
      <nav class="navbar has-shadow" id="nav-bar-bg">
        <!-- LOGO -->
        <div class="navbar-brand">
          <a href="./index.html" class="navbar-item py-2 px-2">
            <img
              src="https://www.washingtoncenter.org/wp-content/uploads/2018/07/Arts-Guild-Logo-1-Black-Copy.jpg"
              alt="logo"
              id="navbar-logo"
            />
          </a>

          <!-- BURGER MENU -->
          <div class="navbar-burger" id="burger">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>

        <!-- MENU LINKS -->
        <div class="navbar-menu" id="nav-links">
          <div class="navbar-end pr-2">
            <a href="./index.html" class="navbar-item is-size-5">Home</a>
            <a href="./question.html" class="navbar-item is-size-5"
              >Get Started</a
            >
            <a href="./favourites.html" class="navbar-item is-size-5"
              >Favourites</a
            >
            <a href="./gallery.html" class="navbar-item is-size-5">Gallery</a>
            <a href="./about.html" class="navbar-item is-size-5">About Us</a>
          </div>
        </div>
      </nav>
    </header>

    <div class="banner">
      <h1 class="title">Jonny gallery ideas</h1>
    </div>

    <main class="container">
      <!-- flex container for examples-->
      <section class="paint-container">
        <html>
          <head>
            <title>Gallery</title>
            <link
              href="https://fonts.googleapis.com/css?family=Roboto+Slab"
              rel="stylesheet"
            />
            <style>
              body {
                background-image: "";
              }

              * {
                margin: 0;
                padding: 0;
                font-family: "Roboto Slab", serif;
              }

              .dd-vc {
                position: relative;
                top: 50%;
                transform: translateY(-50%);
              }
              .dd-transition {
                transition: all 0.3s ease;
              }
              .dd-shadow {
                box-shadow: 0 0 3px 1px rgba(0, 0, 0, 0.3);
              }

              #dragDrop {
                width: 1000px;
                margin: 20px auto 0;
                position: relative;
              }

              .dd-slot {
                float: left;
                outline: 2px dashed rgba(54, 86, 132, 0.75);
                outline-offset: -15px;
                position: relative;
                pointer-events: none;
              }
              .dd-slot-num {
                text-align: center;
                color: rgba(0, 0, 0, 0.1);
                font-size: 40px;
                position: absolute;
                width: 100%;
              }

              .dd-item {
                position: absolute;
                left: 0;
                top: 0;
                box-sizing: border-box;
                padding: 10px;
                cursor: pointer;
              }
              .dd-item.dd-disabled {
                pointer-events: none;
                opacity: 0;
              }
              .dd-item.dd-selected {
                z-index: 20;
              }
              .dd-item-inner {
                background-repeat: no-repeat;
                background-size: cover;
                background-position: center;
                width: 100%;
                height: 100%;
                position: relative;
              }
              .dd-item-panel {
                width: 80%;
                height: 35px;
                background: #fff;
                position: absolute;
                left: 10%;
                bottom: -15px;
                z-index: 5;
              }
              .dd-item-title {
                font-size: 15px;
                color: #365684;
                text-align: center;
                line-height: 35px;
              }
            </style>
          </head>

          <body>
            <div id="dragDrop"></div>

            <script>
              (function () {
                var _doc = window.document;

                var _numOfImageSlots = 21,
                  _numOfImagesPerRow = 4,
                  _imageMarginBottom = 30;

                var _imageAspectWidth = 1920,
                  _imageAspectHeight = 1080;

                var _imageSlots = [],
                  _selectedImageElement = null,
                  _originalImageSlot = null,
                  _originalClickCoords = null,
                  _lastTouchedSlotId = null;

                var _imageLibrary = [
                    {
                      id: 01,
                      image: "images/paint/p-animals/p-animals-oil.jpeg",
                      title: "p-animals-oil",
                    },
                    {
                      id: 02,
                      image: "./images/paint/p-animals/p-animals-tempera.jpeg",
                      title: "p-animals-tempera",
                    },
                    {
                      id: 03,
                      image: "./images/paint/p-animals/p-animals-water.jpeg",
                      title: "p-animals-water",
                    },
                    {
                      id: 04,
                      image: "./images/paint/p-landscape/p-landscape-oil.jpeg",
                      title: "p-landscape-oil",
                    },
                    {
                      id: 05,
                      image:
                        "./images/paint/p-landscape/p-landscape-tempera.jpeg",
                      title: "p-landscape-tempera",
                    },
                    {
                      id: 06,
                      image:
                        "./images/paint/p-landscape/p-landscape-water.jpeg",
                      title: "p-landscape-water",
                    },
                    {
                      id: 07,
                      image: "./images/paint/p-people/p-people-tempera.jpeg",
                      title: "p-people-tempera",
                    },
                    {
                      id: 08,
                      image: "./images/paint/p-people/p-people-water.jpeg",
                      title: "p-people-water",
                    },
                    {
                      id: 09,
                      image: "./images/paint/p-people/p-portrait-oil.jpeg",
                      title: "p-portrait-oil",
                    },
                    {
                      id: 10,
                      image: "./images/sculpture/s-animals/s-animals-clay.jpeg",
                      title: "s-animals-clay",
                    },
                    {
                      id: 11,
                      image: "./images/sculpture/s-animals/s-animals-gold.jpeg",
                      title: "s-animals-gold",
                    },
                    {
                      id: 12,
                      image:
                        "./images/sculpture/s-animals/s-animals-marble.jpeg",
                      title: "s-animals-marble",
                    },
                    {
                      id: 13,
                      image:
                        "./images/sculpture/s-animals/s-animals-metal.jpeg",
                      title: "s-animals-metal",
                    },
                    {
                      id: 14,
                      image:
                        "./images/sculpture/s-landscape/s-landscape-clay.jpeg",
                      title: "s-landscape-clay",
                    },
                    {
                      id: 15,
                      image:
                        "./images/sculpture/s-landscape/s-landscape-gold.jpeg",
                      title: "s-landscape-gold",
                    },
                    {
                      id: 16,
                      image:
                        "./images/sculpture/s-landscape/s-landscape-marble.jpeg",
                      title: "s-landscape-marble",
                    },
                    {
                      id: 17,
                      image:
                        "./images/sculpture/s-landscape/s-landscape-metal.jpeg",
                      title: "s-landscape-metal",
                    },
                    {
                      id: 18,
                      image: "./images/sculpture/s-people/s-people-clay.jpeg",
                      title: "s-people-clay",
                    },
                    {
                      id: 19,
                      image: "./images/sculpture/s-people/s-people-gold.jpeg",
                      title: "s-people-gold",
                    },
                    {
                      id: 20,
                      image: "./images/sculpture/s-people/s-people-marble.jpeg",
                      title: "s-people-marble",
                    },
                    {
                      id: 21,
                      image: "./images/sculpture/s-people/s-people-metal.jpeg",
                      title: "s-people-metal",
                    },
                  ],
                  _listedImageIds = [
                    01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12, 13, 14, 15,
                    16, 17, 18, 19, 20, 21,
                  ];

                function init() {
                  addImageSlots();
                  drawImages();

                  _doc
                    .getElementById("dragDrop")
                    .addEventListener("mousemove", imageMousemove);
                }

                function addImageSlots() {
                  var i = 0,
                    len = _numOfImageSlots,
                    item;

                  var wrap = _doc.getElementById("dragDrop");

                  for (; i < len; i++) {
                    item = _doc.createElement("div");

                    item.setAttribute("class", "dd-slot");
                    item.setAttribute(
                      "style",
                      "width:" +
                        100 / _numOfImagesPerRow +
                        "%;padding-bottom:" +
                        (100 / _numOfImagesPerRow) *
                          (_imageAspectHeight / _imageAspectWidth) +
                        "%;margin-bottom:" +
                        _imageMarginBottom +
                        "px;"
                    );

                    item.innerHTML =
                      '<p class="dd-slot-num dd-vc">' + (i + 1) + "</p>";

                    wrap.appendChild(item);
                  }
                }

                function drawImages() {
                  var i = 0,
                    len = _numOfImageSlots,
                    item;

                  var wrap = _doc.getElementById("dragDrop");

                  var slot = _doc.getElementsByClassName("dd-slot")[0],
                    bounds = slot.getBoundingClientRect(),
                    itemWidth = bounds.width,
                    itemHeight = bounds.height;

                  var itemX, itemY;

                  var imageId, image;

                  for (; i < len; i++) {
                    imageId = _listedImageIds[i] || -1;
                    image = getImageById(imageId);

                    itemX = (i % _numOfImagesPerRow) * itemWidth;
                    itemY =
                      Math.floor(i / _numOfImagesPerRow) *
                      (itemHeight + _imageMarginBottom);

                    item = _doc.createElement("div");

                    item.setAttribute(
                      "class",
                      "dd-item dd-transition" +
                        (imageId < 0 ? " dd-disabled" : "")
                    );
                    item.setAttribute("data-image-id", imageId);
                    item.setAttribute(
                      "style",
                      "width:" +
                        itemWidth +
                        "px;height:" +
                        itemHeight +
                        "px;transform:translate3d(" +
                        itemX +
                        "px," +
                        itemY +
                        "px,0);"
                    );

                    item.innerHTML =
                      '<div class="dd-item-inner dd-shadow" style="' +
                      (image
                        ? "background-image:url(images/" + image.image + ")"
                        : "") +
                      '"><div class="dd-item-panel dd-shadow"><h3 class="dd-item-title">' +
                      (image ? image.title : "") +
                      "</h3></div></div>";

                    wrap.appendChild(item);

                    item.addEventListener("mousedown", imageMousedown);
                    item.addEventListener("mouseup", imageMouseup);

                    _imageSlots[i] = {
                      width: itemWidth,
                      height: itemHeight,
                      x: itemX,
                      y: itemY,
                    };
                  }
                }
                function arrangeItems() {
                  var i = 0,
                    len = _listedImageIds.length,
                    slot,
                    ele;

                  for (; i < len; i++) {
                    slot = _imageSlots[i];
                    ele = _doc.querySelector(
                      '[data-image-id="' + _listedImageIds[i] + '"]'
                    );

                    ele.style.transform =
                      "translate3d(" + slot.x + "px," + slot.y + "px,0)";
                  }
                }

                function imageMousedown(event) {
                  if (!_selectedImageElement) {
                    _selectedImageElement = event.currentTarget;
                    _originalClickCoords = { x: event.pageX, y: event.pageY };
                    _originalImageSlot = getIndexOfImageId(
                      _selectedImageElement.getAttribute("data-image-id")
                    );

                    _selectedImageElement.classList.add("dd-selected");
                    _selectedImageElement.classList.remove("dd-transition");
                  }
                }

                function imageMousemove(event) {
                  if (_selectedImageElement) {
                    var wrap = _doc.getElementById("dragDrop"),
                      bounds = wrap.getBoundingClientRect(),
                      left = bounds.left,
                      top = bounds.top;

                    var pageX = event.pageX,
                      pageY = event.pageY;

                    var clickX = pageX - left,
                      clickY = pageY - top,
                      hoverSlotId = getSlotIdByCoords({ x: clickX, y: clickY });

                    var ele = _selectedImageElement,
                      imageId = ele.getAttribute("data-image-id"),
                      index = _originalImageSlot,
                      newIndex = getIndexOfImageId(imageId),
                      x = _imageSlots[index].x,
                      y = _imageSlots[index].y;

                    var resultX = x + (pageX - _originalClickCoords.x),
                      resultY = y + (pageY - _originalClickCoords.y);

                    if (
                      hoverSlotId != undefined &&
                      _lastTouchedSlotId != hoverSlotId
                    ) {
                      _lastTouchedSlotId = hoverSlotId;

                      _listedImageIds.splice(
                        hoverSlotId,
                        0,
                        _listedImageIds.splice(newIndex, 1)[0]
                      );
                      arrangeItems();
                    }

                    ele.style.transform =
                      "translate3d(" + resultX + "px," + resultY + "px,0)";
                  }
                }
                function imageMouseup() {
                  _selectedImageElement.classList.remove("dd-selected");
                  _selectedImageElement.classList.add("dd-transition");

                  _selectedImageElement = null;
                  _originalClickCoords = null;

                  arrangeItems();
                }

                function getSlotIdByCoords(coords) {
                  // Get the current slot being hovered over
                  for (var id in _imageSlots) {
                    var slot = _imageSlots[id];

                    if (
                      slot.x <= coords.x &&
                      coords.x <= slot.x + slot.width &&
                      slot.y <= coords.y &&
                      coords.y <= slot.y + slot.height
                    )
                      return id;
                  }
                }
                function getImageById(id) {
                  return _imageLibrary.find(function (image) {
                    return image.id == id;
                  });
                }
                function getIndexOfImageId(id) {
                  var i = 0,
                    len = _listedImageIds.length;

                  for (; i < len; i++) if (_listedImageIds[i] == id) return i;
                }

                init();
              })();
            </script>
          </body>
        </html>
      </section>
    </main>
  </body>
</html>
